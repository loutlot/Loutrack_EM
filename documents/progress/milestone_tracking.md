# マイルストーン進捗管理

## 現在のフェーズ: M0（1軸ディスクリートPoC）

---

## フェーズ別ドキュメント

| フェーズ | 仕様書 | BOM | 回路図 | 組み立て | 実験ログ |
|----------|--------|-----|--------|----------|----------|
| M0 | [仕様](../requirements/m0_poc/) | [BOM](../bom/m0_poc/) | [回路図](../schematics/m0_poc/) | [組み立て](../assembly/m0_poc/) | [ログ](m0_poc/experiment_log.md) |
| M1 | [仕様](../requirements/m1_3axis/) | [BOM](../bom/m1_3axis/) | [回路図](../schematics/m1_3axis/) | [組み立て](../assembly/m1_3axis/) | [ログ](m1_3axis/) |
| M1.5 | [仕様](../requirements/m1.5_coil_power/) | [BOM](../bom/m1.5_coil_power/) | [回路図](../schematics/m1.5_coil_power/) | [組み立て](../assembly/m1.5_coil_power/) | [ログ](m1.5_coil_power/) |

---

## 使用機材

| 部品 | 型番 | 数量 | ステータス |
|------|------|------|------------|
| MCU | XIAO ESP32C3 | **2** | ✅ 入手済み |
| 3軸コイル | 3D11-722J | **5** | ✅ 入手済み |
| モータドライバ | DRV8835モジュール | 2 | ✅ 入手済み |
| オペアンプ | MCP6022-I/P | 2 | ✅ 入手済み |
| ADC | MCP3008-I/P | 1 | ✅ 入手済み |
| **加速度センサー** | **LIS3DH（ブレークアウト）** | **1** | ⬜ 未入手（M1用） |
| 受動部品（R,C） | 各種 | 適量 | ✅ 入手済み |
| ブレッドボード | EIC-106J | 1 | ✅ 入手済み |

---

## M0: 1軸ディスクリートPoC

**目標:** Aの安定算出、C最適化、距離/角度応答の確認

### タスク一覧

| # | タスク | ステータス | 開始日 | 完了日 | 備考 |
|---|--------|------------|--------|--------|------|
| 0.1 | 部品確認・在庫チェック | ✅ 完了 | 2026-01-07 | 2026-01-07 | |
| 0.2 | GPIO割り当て確定 | ✅ 完了 | 2026-01-07 | 2026-01-07 | XIAO ESP32C3 |
| 0.3 | Vmid生成回路組み立て | ✅ 完了 | 2026-01-11 | 2026-01-11 | |
| 0.4 | 受信アンプ組み立て | ✅ 完了 | 2026-01-11 | 2026-01-11 | |
| 0.5 | ADC(MCP3008)接続・動作確認 | ⬜ 未着手 | - | - | |
| 0.6 | 送信回路(DRV8835)組み立て | ⬜ 未着手 | - | - | |
| 0.7 | PWM生成ファームウェア | ⬜ 未着手 | - | - | |
| 0.8 | I/Q処理ファームウェア | ⬜ 未着手 | - | - | |
| 0.9 | 共振C探索 | ⬜ 未着手 | - | - | 3D11-722J: L≈7.2mH |
| 0.10 | 距離・角度応答測定 | ⬜ 未着手 | - | - | |
| 0.11 | AC-01〜04達成確認 | ⬜ 未着手 | - | - | |

### ステータス凡例
- ⬜ 未着手
- 🔄 進行中
- ✅ 完了
- ⏸️ 保留
- ❌ 中止

---

## M1: 3軸TDM（ディスクリート）+ LIS3DH統合

**目標:** (Ax,Ay,Az)がスロットで正しく分離できる、軸干渉・過渡対策のパラメータ確立、Hemispheric ambiguity解決

| # | タスク | ステータス | 開始日 | 完了日 | 備考 |
|---|--------|------------|--------|--------|------|
| 1.1 | 3D11-722J Y/Z軸接続 | ⬜ 未着手 | - | - | |
| 1.2 | DRV8835 2枚構成 | ⬜ 未着手 | - | - | |
| 1.3 | 3軸受信アンプ構成 | ⬜ 未着手 | - | - | MCP6022 2枚使用 |
| 1.4 | TDMスロット制御実装 | ⬜ 未着手 | - | - | |
| 1.5 | 軸間干渉測定・対策 | ⬜ 未着手 | - | - | |
| 1.6 | settling time最適化 | ⬜ 未着手 | - | - | |
| **1.7** | **LIS3DH購入・接続** | ⬜ 未着手 | - | - | **Hemispheric ambiguity解決用** |
| **1.8** | **LIS3DH FW実装** | ⬜ 未着手 | - | - | **重力方向検出** |
| **1.9** | **Hemispheric ambiguity検証** | ⬜ 未着手 | - | - | **IMUで上下識別** |

### Hemispheric Ambiguity解決方針

- **問題**: +X+Y+Zと-X-Y-Zが同じ磁界測定値になる
- **解決**: LIS3DH（3軸加速度センサー）で重力方向を検出し、上下を識別
- **参考**: Kirb EMトラッキング講義（BMI270使用、同様のアプローチ）
- **接続**: I2C（D4=SDA, D5=SCL）

---

## M1.5: 自作コイル＆ドライバ強化

**目標:** 送信距離を3m以上に拡大するための自作コイル製作とドライバ・電源強化

| # | タスク | ステータス | 開始日 | 完了日 | 備考 |
|---|--------|------------|--------|--------|------|
| 1.5.1 | 送信コイル設計（巻数・線径・コア検討） | ⬜ 未着手 | - | - | |
| 1.5.2 | コイル製作治具準備 | ⬜ 未着手 | - | - | |
| 1.5.3 | 送信コイル製作・インダクタンス測定 | ⬜ 未着手 | - | - | |
| 1.5.4 | 高出力ドライバ選定・評価 | ⬜ 未着手 | - | - | DRV8835以外を検討 |
| 1.5.5 | 電源強化（専用電源 or 昇圧回路） | ⬜ 未着手 | - | - | |
| 1.5.6 | 距離レンジ測定（1m/2m/3m） | ⬜ 未着手 | - | - | |
| 1.5.7 | 熱設計・連続動作テスト | ⬜ 未着手 | - | - | |

---

## M2: 3軸SMD試作基板

**目標:** ディスクリートPoCと同等のA応答を再現、ノイズ・再現性の改善

| # | タスク | ステータス | 開始日 | 完了日 | 備考 |
|---|--------|------------|--------|--------|------|
| 2.0 | バッテリー駆動仕様策定 | ✅ 完了 | 2026-01-11 | 2026-01-11 | GPIO割り当て、電源回路設計 |
| 2.0.1 | 電源回路図作成 | ✅ 完了 | 2026-01-11 | 2026-01-11 | 電圧監視、Wake-up回路 |
| 2.0.2 | バッテリー監視ファームウェア | ✅ 完了 | 2026-01-11 | 2026-01-11 | battery_monitor.h/cpp |
| 2.0.3 | DEEP SLEEP実装 | ✅ 完了 | 2026-01-11 | 2026-01-11 | power_manager.h/cpp |
| 2.1 | 回路図設計 | ⬜ 未着手 | - | - | |
| 2.2 | 基板レイアウト | ⬜ 未着手 | - | - | |
| 2.3 | 基板発注 | ⬜ 未着手 | - | - | |
| 2.4 | 実装・動作確認 | ⬜ 未着手 | - | - | |

---

## M3: 推定アルゴリズム拡張

**目標:** 3軸観測ベクトルを用いた姿勢/位置推定の初期実装

| # | タスク | ステータス | 開始日 | 完了日 | 備考 |
|---|--------|------------|--------|--------|------|
| 3.1 | 磁界モデル実装 | ⬜ 未着手 | - | - | |
| 3.2 | 姿勢推定アルゴリズム | ⬜ 未着手 | - | - | |
| 3.3 | 位置推定アルゴリズム | ⬜ 未着手 | - | - | |

---

## M4: 製品化要素

**目標:** 送信出力拡張、無線多端末、HMDアンカー整列

| # | タスク | ステータス | 開始日 | 完了日 | 備考 |
|---|--------|------------|--------|--------|------|
| 4.1 | 高出力ドライバ選定 | ⬜ 未着手 | - | - | |
| 4.2 | 無線プロトコル設計 | ⬜ 未着手 | - | - | |
| 4.3 | VRChat連携実装 | ⬜ 未着手 | - | - | |

---

## 変更履歴

| 日付 | 内容 | 変更者 |
|------|------|--------|
| 2026-01-07 | 初版作成 | - |
| 2026-01-07 | XIAO ESP32C3, 3D11-722J追加 | - |
| 2026-01-07 | フェーズ別フォルダ構成に対応 | - |
| 2026-01-07 | M1.5（自作コイル＆ドライバ強化）追加 | - |
| 2026-01-11 | M0: Vmid生成回路と受信アンプ組み立て完了 | - |
| 2026-01-11 | M2: バッテリー駆動仕様策定・ファームウェア実装 | - |
| 2026-01-13 | M1: LIS3DH統合タスク追加（1.7-1.9）、Hemispheric ambiguity解決方針追記 | - |
