# M1.5: 自作コイル＆ドライバ強化 仕様書

**Version:** 0.1  
**作成日:** 2026-01-07

---

## 1. 目的

M0/M1で使用した3D11-722JとDRV8835の組み合わせでは、送信距離が限られる。
VRChatフルボディトラッキングの実用化に向け、**3m以上の送受信距離**を実現するため、
送信系（コイル・ドライバ・電源）を強化する。

---

## 2. 達成目標

| 項目 | M1まで | M1.5目標 |
|------|--------|----------|
| 有効距離 | 〜30cm | 3m以上 |
| 送信電流 | 〜100mA | 0.5〜2A |
| 送信コイル | 3D11-722J (7.2mH) | 自作コイル（最適化） |
| ドライバ | DRV8835 (1.5A) | 高出力ドライバ |
| 電源 | USB 5V | 専用電源 or 昇圧 |

---

## 3. 送信コイル設計

### 3.1 磁界強度の基本

磁気ダイポールの磁界強度（軸上）:

```
B ∝ μ₀ × n × I × A / r³
```

- n: 巻数
- I: 電流
- A: コイル面積
- r: 距離

→ **大きいコイル × 多い巻数 × 大電流** で磁界強度UP

### 3.2 設計パラメータ候補

| パラメータ | 候補1（小型） | 候補2（中型） | 候補3（大型） |
|------------|--------------|--------------|--------------|
| 形状 | 立方体 | 立方体 | 立方体 |
| 一辺 | 50mm | 80mm | 100mm |
| 巻数/軸 | 30T | 50T | 50T |
| 線径 | 0.3mm | 0.5mm | 0.8mm |
| 概算L | 〜5mH | 〜15mH | 〜20mH |

### 3.3 コイル製作方法

1. **立方体フレーム製作**
   - 3Dプリント or アクリル板組み立て
   - 各軸用の巻き溝を設ける

2. **巻線**
   - エナメル線を使用
   - 層巻き or 乱巻き
   - 各軸が直交するように配置

3. **インダクタンス測定**
   - LCRメーターで測定
   - 共振Cを計算

---

## 4. ドライバ選定

### 4.1 要件

| 項目 | 要件 |
|------|------|
| 出力電流 | 1A以上（ピーク2A以上） |
| PWM周波数 | 20kHz以上対応 |
| 電源電圧 | 12V〜24V対応 |
| チャンネル数 | 3軸 = 3ch（または2ch×2） |

### 4.2 候補ドライバ

| 型番 | メーカー | 電流 | 電圧 | 備考 |
|------|----------|------|------|------|
| DRV8833 | TI | 1.5A | 2.7〜10.8V | DRV8835の上位 |
| TB6612FNG | 東芝 | 1.2A (3A peak) | 2.5〜13.5V | 定番 |
| L298N | ST | 2A | 5〜35V | 大型、放熱板付き |
| BTS7960 | Infineon | 43A | 5.5〜27V | 高出力、過剰かも |
| ディスクリートMOSFET | - | 任意 | 任意 | フルカスタム可 |

### 4.3 初期選定

**TB6612FNG** または **L298N** から開始を推奨。

---

## 5. 電源強化

### 5.1 要件

| 項目 | 計算 |
|------|------|
| 電流 | 1A × 3軸 = 3A（同時駆動時） |
| 電圧 | 12V（コイル抵抗・インダクタンスに依存） |
| 電力 | 12V × 3A = 36W |

### 5.2 電源オプション

| 方式 | 利点 | 欠点 |
|------|------|------|
| ACアダプタ 12V 5A | 安定、安価 | コード必要 |
| Li-Po 3S (11.1V) | ポータブル | 充電管理必要 |
| USB PD + 昇圧 | USB-C対応 | 変換ロス |

---

## 6. 熱設計

### 6.1 発熱源

- ドライバIC（オン抵抗による損失）
- コイル（銅損）
- 昇圧回路（変換損失）

### 6.2 対策

- ヒートシンク追加
- 基板の銅箔面積拡大
- TDMのデューティ比調整（常時送信を避ける）

---

## 7. 検証項目

| # | 項目 | 方法 |
|---|------|------|
| 1 | コイルL値 | LCRメーター |
| 2 | 共振C最適化 | 受信振幅Aで評価 |
| 3 | 距離レンジ | 1m/2m/3mでA測定 |
| 4 | 消費電力 | 電流計で測定 |
| 5 | 温度上昇 | 30分連続運転後の温度 |

---

## 8. リスクと対策

| リスク | 対策 |
|--------|------|
| コイルが大きすぎてVRに不向き | Beacon側は固定なので許容、Trackerは小型維持 |
| 発熱で連続運転できない | TDMデューティ調整、放熱強化 |
| 電磁ノイズが増える | シールド、フィルタ追加 |
| コストが上がる | M2で量産最適化 |

---

## 9. 参考資料

- [コイル設計の基礎](https://www.coilcraft.com/)
- [TB6612FNGデータシート](https://toshiba.semicon-storage.com/jp/semiconductor/product/motor-driver-ics/brushed-dc-motor-driver-ics/detail.TB6612FNG.html)
- [L298Nデータシート](https://www.st.com/resource/en/datasheet/l298.pdf)

